---
import { urlFor } from '../../lib/sanityImage';

const { node } = Astro.props;
const images = node.images;

type SanityImageWithAlt = {
  asset: {
    _ref: string;
    _type: 'reference';
  };
  alt?: string;
};
---
<section class="grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-6">
  {images.map((image: SanityImageWithAlt) => (
    <img
      src={urlFor(image).width(330).format('webp').url()}
      srcset={`
        ${urlFor(image).width(330).format('webp').url()} 330w,
        ${urlFor(image).width(660).format('webp').url()} 660w
      `}
      sizes="(max-width: 640px) 100vw, 330px"
      alt={image.alt || ''}
      loading="lazy"
      decoding="async"
      class="image-item w-full h-auto"
    />
  ))}
</section>
